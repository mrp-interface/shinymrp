% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/workflow.R
\docType{class}
\name{MRPWorkflow}
\alias{MRPWorkflow}
\title{MRPWorkflow objects}
\format{
An \link[R6:R6Class]{R6} generator object.
}
\description{
A \code{MRPWorkflow} object is an \link[R6:R6Class]{R6} object created by
the \code{\link[=mrp_workflow]{mrp_workflow()}} function. This class provides methods for all steps
in the workflow, from data preparation and visualization to model fitting.
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-MRPWorkflow-new}{\code{MRPWorkflow$new()}}
\item \href{#method-MRPWorkflow-metadata}{\code{MRPWorkflow$metadata()}}
\item \href{#method-MRPWorkflow-data}{\code{MRPWorkflow$data()}}
\item \href{#method-MRPWorkflow-preprocess}{\code{MRPWorkflow$preprocess()}}
\item \href{#method-MRPWorkflow-link_acs}{\code{MRPWorkflow$link_acs()}}
\item \href{#method-MRPWorkflow-load_pstrat}{\code{MRPWorkflow$load_pstrat()}}
\item \href{#method-MRPWorkflow-demo_bars}{\code{MRPWorkflow$demo_bars()}}
\item \href{#method-MRPWorkflow-covar_hist}{\code{MRPWorkflow$covar_hist()}}
\item \href{#method-MRPWorkflow-sample_size_map}{\code{MRPWorkflow$sample_size_map()}}
\item \href{#method-MRPWorkflow-outcome_plot}{\code{MRPWorkflow$outcome_plot()}}
\item \href{#method-MRPWorkflow-outcome_map}{\code{MRPWorkflow$outcome_map()}}
\item \href{#method-MRPWorkflow-estimate_plot}{\code{MRPWorkflow$estimate_plot()}}
\item \href{#method-MRPWorkflow-estimate_map}{\code{MRPWorkflow$estimate_map()}}
\item \href{#method-MRPWorkflow-create_model}{\code{MRPWorkflow$create_model()}}
\item \href{#method-MRPWorkflow-pp_check}{\code{MRPWorkflow$pp_check()}}
\item \href{#method-MRPWorkflow-compare_models}{\code{MRPWorkflow$compare_models()}}
\item \href{#method-MRPWorkflow-clone}{\code{MRPWorkflow$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-new"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-new}{}}}
\subsection{Method \code{new()}}{
Initializes the MRPWorkflow object, setting up necessary fields for data processing and model fitting.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$new()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
A new MRPWorkflow object.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-metadata"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-metadata}{}}}
\subsection{Method \code{metadata()}}{
Retrieves the metadata associated with the current workflow, including information about time variables, family, and special cases.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$metadata()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-data"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-data}{}}}
\subsection{Method \code{data()}}{
Retrieves the preprocessed sample data that has been prepared for MRP analysis.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$data()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-preprocess"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-preprocess}{}}}
\subsection{Method \code{preprocess()}}{
Preprocesses the input sample data by cleaning, validating, and preparing it for MRP analysis. This includes handling time-varying data, aggregated data, and special cases.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$preprocess(
  data,
  is_timevar = FALSE,
  is_aggregated = FALSE,
  special_case = NULL,
  family = NULL
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{data}}{Input sample data to be preprocessed}

\item{\code{is_timevar}}{Logical indicating whether the data contains time-varying components}

\item{\code{is_aggregated}}{Logical indicating whether the data is already aggregated}

\item{\code{special_case}}{Character string specifying special case handling (e.g., "covid", "poll")}

\item{\code{family}}{Character string specifying the model family (e.g., "binomial", "normal")}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-link_acs"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-link_acs}{}}}
\subsection{Method \code{link_acs()}}{
Links the preprocessed sample data to ACS post-stratification data based on geographic and demographic variables.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$link_acs(link_geo = NULL, acs_year = 2023)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{link_geo}}{Character string specifying the geographic level for linking (e.g., "state", "county", "zip")}

\item{\code{acs_year}}{Numeric value specifying the ACS year to use for post-stratification data}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-load_pstrat"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-load_pstrat}{}}}
\subsection{Method \code{load_pstrat()}}{
Loads and processes custom post-stratification data instead of using ACS data. This method validates the data and prepares it for MRP analysis.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$load_pstrat(pstrat_data, is_aggregated = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{pstrat_data}}{Custom post-stratification data to be loaded}

\item{\code{is_aggregated}}{Logical indicating whether the post-stratification data is already aggregated}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-demo_bars"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-demo_bars}{}}}
\subsection{Method \code{demo_bars()}}{
Creates bar plots comparing demographic distributions between
input survey data and target population data.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$demo_bars(demo, file = NULL, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{demo}}{Character string specifying the demographic variable to plot}

\item{\code{file}}{Optional file path to save the plot}

\item{\code{...}}{Additional arguments passed to ggsave}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A ggplot object or patchwork object showing demographic comparisons
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-covar_hist"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-covar_hist}{}}}
\subsection{Method \code{covar_hist()}}{
Creates histogram plots showing the distribution of geographic
covariates across zip codes. Only available for COVID data.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$covar_hist(covar, file = NULL, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{covar}}{Character string specifying the covariate. Options: "edu",
"poverty", "employ", "income", "urban", "adi"}

\item{\code{file}}{Optional file path to save the plot}

\item{\code{...}}{Additional arguments passed to ggsave}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A ggplot object showing the covariate distribution histogram
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-sample_size_map"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-sample_size_map}{}}}
\subsection{Method \code{sample_size_map()}}{
Creates interactive choropleth maps showing data distribution
with respect to geography.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$sample_size_map(file = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{file}}{Optional file path to save the plot}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A highcharter map object showing sample size distribution
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-outcome_plot"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-outcome_plot}{}}}
\subsection{Method \code{outcome_plot()}}{
Creates plots showing the distribution of outcome measures over time (for time-varying data) or as static distributions (for cross-sectional data).
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$outcome_plot(file = NULL, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{file}}{Optional file path to save the plot}

\item{\code{...}}{Additional arguments passed to ggsave}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A ggplot object showing the outcome measure distribution
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-outcome_map"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-outcome_map}{}}}
\subsection{Method \code{outcome_map()}}{
Creates maps showing average outcome measure by geography for
cross-sectional data, or highest/lowest weekly average for time-varying data.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$outcome_map(summary_type = NULL, file = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{summary_type}}{Character string for time-varying data: "max" or "min"}

\item{\code{file}}{Optional file path to save the map}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A highcharter map object showing outcome measures by geography
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-estimate_plot"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-estimate_plot}{}}}
\subsection{Method \code{estimate_plot()}}{
Creates plots showing MRP estimates for different subgroups, either over time (for time-varying data) or as static estimates (for cross-sectional data).
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$estimate_plot(
  model,
  group,
  interval = 0.95,
  show_caption = TRUE,
  file = NULL,
  ...
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{model}}{Fitted MRPModel object}

\item{\code{group}}{Character string specifying the demographic group for plotting}

\item{\code{interval}}{Confidence interval or standard deviation for the estimates (default is 0.95)}

\item{\code{file}}{Optional file path to save the plot}

\item{\code{...}}{Additional arguments passed to ggsave}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A ggplot object showing the group estimates
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-estimate_map"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-estimate_map}{}}}
\subsection{Method \code{estimate_map()}}{
Creates interactive choropleth maps showing MRP estimates by geographic regions.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$estimate_map(
  model,
  geo = NULL,
  time_index = NULL,
  interval = 0.95,
  file = NULL,
  ...
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{model}}{Fitted MRPModel object}

\item{\code{geo}}{Character string specifying the geographic level for mapping}

\item{\code{time_index}}{Numeric value specifying the time index for time-varying data}

\item{\code{interval}}{Confidence interval or standard deviation for the estimates (default is 0.95)}

\item{\code{file}}{Optional file path to save the map}

\item{\code{...}}{Additional arguments}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A highcharter map object showing MRP estimates by geography
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-create_model"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-create_model}{}}}
\subsection{Method \code{create_model()}}{
Creates a new MRPModel object with validated effects specification and prepared data for Bayesian model fitting.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$create_model(model_spec)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{model_spec}}{List containing model effects specification including intercept, fixed effects, varying effects, and interactions}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A new MRPModel object
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-pp_check"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-pp_check}{}}}
\subsection{Method \code{pp_check()}}{
Creates posterior predictive check plots to assess model fit by comparing observed data to replicated data from the posterior predictive distribution.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$pp_check(model, file = NULL, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{model}}{Fitted MRPModel object}

\item{\code{file}}{Optional file path to save the plot}

\item{\code{...}}{Additional arguments passed to ggsave}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-compare_models"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-compare_models}{}}}
\subsection{Method \code{compare_models()}}{
Compares multiple fitted MRP models using leave-one-out cross-validation to assess relative model performance.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$compare_models(..., suppress = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{...}}{Multiple MRPModel objects to compare}

\item{\code{suppress}}{Character string specifying output to suppress during comparison}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A data frame summarizing the comparison results
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-MRPWorkflow-clone"></a>}}
\if{latex}{\out{\hypertarget{method-MRPWorkflow-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{MRPWorkflow$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}

% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fct_data.R
\name{prepare_mrp_acs}
\alias{prepare_mrp_acs}
\title{Prepare MRP data using ACS-based poststratification}
\usage{
prepare_mrp_acs(input_data, tract_data, metadata, link_geo = NULL)
}
\arguments{
\item{input_data}{Data frame containing preprocessed sample data.}

\item{tract_data}{Data frame containing ACS tract-level demographic data
with GEOID and demographic cross-tabulation columns.}

\item{metadata}{List containing analysis metadata including family type
and time-varying flags.}

\item{link_geo}{Character string specifying geographic linking variable
(e.g., "zip", "county", "state"). Must match a column in input_data.}
}
\value{
Named list containing:
  \item{input}{Filtered input data (common geographic areas only)}
  \item{new}{Complete poststratification data with population weights and covariates}
  \item{levels}{Complete list of factor levels for all variables}
  \item{vars}{Variable lists for model specification (fixed, varying, omit)}
}
\description{
Prepares data for MRP analysis using American Community Survey
(ACS) tract-level data for poststratification. Combines tract data to the
appropriate geographic scale, creates complete factor level combinations,
and appends geographic predictors. This function creates the poststratification
frame from Census data.
}
\details{
The function:
\enumerate{
  \item Aggregates tract data to the specified geographic scale
  \item Filters both datasets to common geographic areas
  \item Creates complete demographic combinations using expand.grid()
  \item Adds population weights from Census data
  \item Appends geographic predictors from input data
  \item Generates variable lists for modeling
}
}
